(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{110:function(e,t,n){},113:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),u=n(23),l=n(24),s=n(26),i=n(25),m=n(15),b=n(9),f=n(7),h=Object(f.b)("contacts/fetchContactsRequest"),p=Object(f.b)("contacts/fetchContactSuccess"),d=Object(f.b)("contacts/fetchContactError"),g=Object(f.b)("contacts/addContactsRequest"),O=Object(f.b)("contacts/addContactsSuccess"),j=Object(f.b)("contacts/addContactsError"),v=Object(f.b)("contacts/deleteContactsRequest"),E=Object(f.b)("contacts/deleteContactsSuccess"),y=Object(f.b)("contacts/deleteContactsError"),C=(Object(f.b)("phonebook/delete"),Object(f.b)("phonebook/filter"));var k={changeFilter:C},S=Object(b.b)((function(e){return{contacts:e.contacts.contacts}}),k)((function(e){var t=e.filter,n=e.changeFilter;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{style:{display:"block",marginTop:"5px",marginBottom:"10px",width:"100%"},type:"text",name:"filter",value:t,onChange:function(e){return n(e.target.value)},placeholder:"find contact"}))})),w=n(6),x=n(153),N=n(20),R=n.n(N),A={addContact:function(e){var t=e.name,n=e.number,a=e.id;return function(e){var r={name:t,number:n,id:a};e(g()),R.a.post("/contacts",r).then((function(t){var n=t.data;return e(O(n))})).catch((function(t){return e(j(t.message))}))}},deleteContact:function(e){return function(t){t(v()),R.a.delete("/contacts/".concat(e)).then((function(){return t(E(e))})).catch((function(e){return t(y(e.message))}))}},fetchContacts:function(){return function(e){e(h()),R.a.get("/contacts").then((function(t){var n=t.data;return e(p(n))})).catch((function(t){return e(d(t.message))}))}}},U=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={contacts:[],name:"",number:""},e.handleChange=function(t){var n=t.target.name;e.setState(Object(w.a)({},n,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.addContact({name:e.state.name,id:Object(x.a)(),number:e.state.number}),e.setState({name:"",number:""})},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,style:{border:"1px solid whisper",width:"400px",height:"165px"}},r.a.createElement("label",null,"Name"),r.a.createElement("input",{name:"name",style:{display:"block",marginTop:"5px",marginBottom:"10px",width:"100%"},placeholder:"add name",value:this.state.name,onChange:this.handleChange}),r.a.createElement("label",null,"Number"),r.a.createElement("input",{name:"number",style:{display:"block",marginTop:"5px",marginBottom:"10px",width:"100%"},placeholder:"add number",value:this.state.number,onChange:this.handleChange}),r.a.createElement("button",{style:{marginTop:"15px",width:"100%",backgroundColor:"royalblue",color:"white",height:"35px"}},"Add contact"))}}]),n}(a.Component),q=Object(b.b)(null,A)(U),T=(n(110),n(155)),B=n(154),D=n(71),I=n.n(D),L=n(147);var F,z,P,J,M=Object(b.b)((function(e){return{contactsItems:e.contacts.contacts,filter:e.contacts.filter}}),(function(e){return{deleteContact:function(t){return e(A.deleteContact(t))}}}))((function(e){var t=e.contactsItems,n=e.deleteContact,a=e.filter;return r.a.createElement(T.a,{className:"list"},function(e,t){return t?e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):e}(t,a).map((function(e){return r.a.createElement(B.a,{key:e.id,timeout:300,classNames:"list-fade"},r.a.createElement("li",{key:e.id,className:"item"},r.a.createElement("p",null,e.name),r.a.createElement("p",null,e.number),r.a.createElement(L.a,{"aria-label":"delete",onClick:function(){return n(e.id)}},r.a.createElement(I.a,null))))})))})),W=(n(113),function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isExsist:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(B.a,{in:!0,appear:!0,classNames:"Phone-slideIn",timeout:1e3,unmountOnExit:!0},r.a.createElement("h1",{className:"Phone"},"PhoneBook")),r.a.createElement(B.a,{in:this.state.isExsist,classNames:"alert",timeout:500,unmountOnExit:!0},r.a.createElement("h2",{className:"alert"},"This name is already in contacts!")),r.a.createElement(q,null),r.a.createElement(B.a,{in:""!==this.props.filter,timeout:500,unmountOnExit:!0},r.a.createElement(S,null)),r.a.createElement(M,null))}}]),n}(a.Component)),_=Object(b.b)((function(e){return{contactsItems:e.contacts.contacts,filter:e.contacts.filter}}),(function(e){return{fetchContacts:function(){return e(A.fetchContacts())}}}))(W),G={registerRequest:Object(f.b)("auth/registerRequest"),registerSuccess:Object(f.b)("auth/registerSuccess"),registerError:Object(f.b)("auth/registerError"),loginRequest:Object(f.b)("auth/loginRequest"),loginSuccess:Object(f.b)("auth/loginSuccess"),loginError:Object(f.b)("auth/loginError"),logoutRequest:Object(f.b)("auth/logoutRequest"),logoutSuccess:Object(f.b)("auth/logoutSuccess"),logoutError:Object(f.b)("auth/logoutError"),getCurrentUserRequest:Object(f.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(f.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(f.b)("auth/getCurrentUserError")},H=n(16),K={name:null,email:null},Q=Object(f.c)(K,(F={},Object(w.a)(F,G.registerSuccess,(function(e,t){return t.payload.user})),Object(w.a)(F,G.loginSuccess,(function(e,t){return t.payload.user})),Object(w.a)(F,G.logoutSuccess,(function(){return K})),Object(w.a)(F,G.getCurrentUserSuccess,(function(e,t){return t.payload})),F)),V=Object(f.c)(null,(z={},Object(w.a)(z,G.registerSuccess,(function(e,t){return t.payload.token})),Object(w.a)(z,G.loginSuccess,(function(e,t){return t.payload.token})),Object(w.a)(z,G.logoutSuccess,(function(){return null})),z)),X=Object(f.c)(null,(P={},Object(w.a)(P,G.registerError,(function(e,t){return t.payload})),Object(w.a)(P,G.loginError,(function(e,t){return t.payload})),Object(w.a)(P,G.logoutError,(function(e,t){return t.payload})),Object(w.a)(P,G.getCurrentUserError,(function(e,t){return t.payload})),P)),Y=Object(f.c)(!1,(J={},Object(w.a)(J,G.registerSuccess,(function(){return!0})),Object(w.a)(J,G.loginSuccess,(function(){return!0})),Object(w.a)(J,G.getCurrentUserSuccess,(function(){return!0})),Object(w.a)(J,G.registerError,(function(){return!1})),Object(w.a)(J,G.loginError,(function(){return!1})),Object(w.a)(J,G.getCurrentUserError,(function(){return!1})),Object(w.a)(J,G.logoutSuccess,(function(){return!1})),J)),Z=Object(H.c)({user:Q,token:V,error:X,isAuthenticated:Y}),$=n(29),ee=n.n($),te=n(42);R.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var ne=function(e){R.a.defaults.headers.common.Authorization="Bearer ".concat(e)},ae=function(){R.a.defaults.headers.common.Authorization=""},re={register:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(n){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(G.registerRequest()),t.prev=1,t.next=4,R.a.post("/users/signup",e);case 4:a=t.sent,ne(a.data.token),n(G.registerSuccess(a.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(G.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(n){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(G.loginRequest()),t.prev=1,t.next=4,R.a.post("/users/login",e);case 4:a=t.sent,ne(a.data.token),n(G.loginSuccess(a.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(G.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(te.a)(ee.a.mark((function e(t){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(G.logoutRequest()),e.prev=1,e.next=4,R.a.post("/users/logout");case 4:ae(),t(G.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(G.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrrentUser:function(){return function(){var e=Object(te.a)(ee.a.mark((function e(t,n){var a,r,c;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=a.auth.token){e.next=3;break}return e.abrupt("return");case 3:return ne(r),t(G.getCurrentUserRequest()),e.prev=5,e.next=8,R.a.get("/users/current");case 8:c=e.sent,t(G.getCurrentUserSuccess(c.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(G.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},ce=function(e){return e.auth.isAuthenticated},oe=n(152),ue=n(151),le={form:{width:320,marginLeft:"auto",marginRight:"auto"},label:{display:"flex",flexDirection:"column",marginBottom:15},title:{display:"flex",justifyContent:"center"}},se=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(w.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onLogin(e.state),e.setState({email:"",password:""})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",{style:le.title},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d\u0430"),r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",style:le.form},r.a.createElement(oe.a,{style:le.label,label:"\u041f\u043e\u0447\u0442\u0430",variant:"outlined",type:"email",name:"email",value:t,onChange:this.handleChange}),r.a.createElement(oe.a,{style:le.label,label:" \u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement(ue.a,{variant:"contained",color:"primary",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")))}}]),n}(a.Component),ie={onLogin:re.logIn},me=Object(b.b)(null,ie)(se),be={form:{width:320,marginLeft:"auto",marginRight:"auto"},label:{display:"flex",flexDirection:"column",marginBottom:15},title:{display:"flex",justifyContent:"center"}},fe=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(w.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state),e.setState({name:"",email:"",password:""})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement("h1",{style:be.title},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",style:be.form},r.a.createElement(oe.a,{style:be.label,label:"\u0418\u043c\u044f",variant:"outlined",type:"name",name:"name",value:t,onChange:this.handleChange}),r.a.createElement(oe.a,{style:be.label,label:"\u041f\u043e\u0447\u0442\u0430",variant:"outlined",type:"email",name:"email",value:n,onChange:this.handleChange}),r.a.createElement(oe.a,{style:be.label,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement(ue.a,{variant:"contained",color:"primary",type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))}}]),n}(a.Component),he={onSubmit:re.register},pe=Object(b.b)(null,he)(fe);n(43),n(115);var de=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return e.auth.user.name}));return r.a.createElement("div",{className:"avatar-container"},r.a.createElement("span",{className:"avatar-title"},"Welcome, ",t," "),r.a.createElement(ue.a,{variant:"contained",color:"primary",type:"submit",onClick:function(){e(re.logOut())}},"\u0412\u044b\u0439\u0442\u0438"))},ge=n(22);n(116);var Oe,je,ve=function(){return r.a.createElement("ul",{className:"nav-list log-list"},r.a.createElement("li",{className:"nav-link"},r.a.createElement(ge.b,{to:"/login",className:"nav-link-item"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("li",{className:"nav-link"},r.a.createElement(ge.b,{to:"/register",className:"nav-link-item"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u0441\u044f")))},Ee=function(){var e=Object(b.d)((function(e){return e.auth.token}));return r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{className:"nav-link"},r.a.createElement(ge.b,{to:"/",className:"nav-link-item"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),e&&r.a.createElement("li",{className:"nav-link"},r.a.createElement(ge.b,{to:"/contacts",className:"nav-link-item"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"))))},ye=function(){var e=Object(b.d)((function(e){return e.auth.token}));return r.a.createElement("header",{className:"header"},r.a.createElement(Ee,null),e?r.a.createElement(de,null):r.a.createElement(ve,null))},Ce={image:{width:"100%",height:"auto",display:"block"}},ke=function(){return r.a.createElement("img",{style:Ce.image,src:"https://st2.depositphotos.com/1001855/7197/i/950/depositphotos_71978857-stock-photo-vintage-rotary-phone.jpg",alt:"main"})},Se=n(48),we=Object(b.b)((function(e){return{isAuthenticated:ce(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,a=e.redirectTo,c=Object(Se.a)(e,["component","isAuthenticated","redirectTo"]);return r.a.createElement(m.b,Object.assign({},c,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(m.a,{to:a})}}))})),xe=Object(b.b)((function(e){return{isAuthenticated:ce(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,a=e.redirectTo,c=Object(Se.a)(e,["component","isAuthenticated","redirectTo"]);return r.a.createElement(m.b,Object.assign({},c,{render:function(e){return n&&c.restricted?r.a.createElement(m.a,{to:a}):r.a.createElement(t,e)}}))})),Ne=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onRefresh()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,null),r.a.createElement(m.d,null,r.a.createElement(xe,{exact:!0,path:"/",component:ke}),r.a.createElement(xe,{path:"/register",restricted:!0,redirectTo:"/contacts",component:pe}),r.a.createElement(xe,{path:"/login",restricted:!0,redirectTo:"/contacts",component:me}),r.a.createElement(we,{path:"/contacts",component:_,redirectTo:"/login"})))}}]),n}(a.Component),Re={onRefresh:re.getCurrrentUser},Ae=Object(b.b)(null,Re)(Ne),Ue=(n(118),n(72)),qe=n(47),Te=n(73),Be=n.n(Te),De=n(74),Ie=n.n(De),Le=n(30),Fe=Object(f.c)([],(Oe={},Object(w.a)(Oe,p,(function(e,t){return t.payload})),Object(w.a)(Oe,O,(function(e,t){var n=t.payload;return[].concat(Object(qe.a)(e),[n])})),Object(w.a)(Oe,E,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Oe)),ze=Object(f.c)(!1,(je={},Object(w.a)(je,g,(function(){return!0})),Object(w.a)(je,O,(function(){return!1})),Object(w.a)(je,j,(function(){return!1})),Object(w.a)(je,v,(function(){return!0})),Object(w.a)(je,E,(function(){return!1})),Object(w.a)(je,y,(function(){return!1})),Object(w.a)(je,h,(function(){return!0})),Object(w.a)(je,p,(function(){return!1})),Object(w.a)(je,d,(function(){return!1})),je)),Pe=Object(f.c)("",Object(w.a)({},C,(function(e,t){return t.payload}))),Je=Object(H.c)({contacts:Fe,filter:Pe,loading:ze}),Me=[].concat(Object(qe.a)(Object(f.d)({serializableCheck:{ignoredActions:[Le.a,Le.f,Le.b,Le.c,Le.d,Le.e]}})),[Be.a]),We={key:"auth",storage:Ie.a,whitelist:["token"]},_e=Object(f.a)({reducer:{contacts:Je,auth:Object(Le.g)(We,Z)},middleware:Me,devTools:!1}),Ge={store:_e,persistor:Object(Le.h)(_e)};o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{store:Ge.store},r.a.createElement(ge.a,null,r.a.createElement(Ue.a,{loading:null,persistor:Ge.persistor},r.a.createElement(Ae,null))))),document.getElementById("root"))},43:function(e,t,n){},84:function(e,t,n){e.exports=n(121)}},[[84,1,2]]]);
//# sourceMappingURL=main.d2785dbe.chunk.js.map